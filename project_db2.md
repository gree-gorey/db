# Глава 1<br/>Задание и анализ предметной области

## 1.1. Задание
Разработать БД полнотекстового поиска для электронного словаря Устьянского диалекта русского языка.

## 1.2. Модель данных
Для организации полнотекстового поиска используем нереляционную документную БД.

### 1.2.1. Описание
Элекронный словарь предназначен для хранения, редактирования, поиска и просмотра статей словаря. Главным структурным элементом словаря является словарная статья.

### 1.2.2. Анализ предметной области

#### Сущности:
* словарная статья

## 1.3. Моделирование структуры данных для организации полнотекстового поиска
Для организации хранения данных в нереляционных документных БД используется агрегатная модель. Агрегат представляет собой наборы данных предназначенных для совместного использования.

### 1.3.1. Агрегаты
Для хранения информации для поиска по словарным статьям будем использовать следующие поля: 

* лемма
* часть речи (`pos`)
* место (`place`)
* помета стиля (`style`)
* пример (`example`)
* определение (`def`)

Пример агрегата хранения данных о словарной статье:
```
{
  "type": "word", 
  "header": {
    "forms": [
      {
        "style": [], 
        "ana": "", 
        "content": "Абора́бки", 
        "place": [], 
        "type": "lemma", 
        "normalized_content": "аборабки"
      }, 
      {
        "style": [], 
        "ana": "", 
        "content": "обара́бки", 
        "place": [], 
        "type": "variant", 
        "normalized_content": "обарабки"
      }, 
      {
        "style": [], 
        "ana": "", 
        "content": "апора́бки", 
        "place": [], 
        "type": "variant", 
        "normalized_content": "апорабки"
      }
    ], 
    "style": [
      "собир."
    ], 
    "place": [], 
    "pos": ""
  }, 
  "senses": [
    {
      "n": "1",
      "elements": [
        {
          "content": "дети, детишки (часто непослушные).", 
          "tag": "def"
        }, 
        {
          "content": "Нарожа́ла обара́бков, а у самой голова не в том конце, бегают да дра́знятся.", 
          "translation": "", 
          "tag": "example", 
          "bibl": "", 
          "normalized_content": "нарожала обарабков, а у самой голова не в том конце, бегают да дразнятся."
        }
      ]
    }
  ]
}
```

### 1.3.2. Схема данных
Для организации полнотекстового поиска будет использоваться нереляционная документная БД Elasticsearch. Составим схему данных. Схема данных:
```
{
  "entry": {
    "dynamic": "true",
    "properties": {
      "header": {
        "dynamic": "true",
        "properties": {
          "forms": {
            "dynamic": "true",
            "properties": {
              "content": {
                "type": "string",
                "index": "not_analyzed"
              },
              "type": {
                "type": "string",
                "index": "not_analyzed"
              }
            }
          }
        }
      },
      "senses": {
        "dynamic": "true",
        "properties": {
          "n": {
            "type": "integer",
            "index": "not_analyzed"
          },
          "elements": {
            "type": "nested",
            "dynamic": "true",
            "properties": {
              "tag": {
                "type": "string",
                "index": "not_analyzed"
              }
            }
          }
        }
      }
    }
  }
}
```
